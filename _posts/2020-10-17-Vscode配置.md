---
title: "vscode配置"
date: 2018-02-10
author: "Hsz"
category: recommend
tags:
    - TextEditor
header-img: "img/home-bg-o.jpg"
update: 2020-10-17
---
# Vscode

我现在的主力编辑器是Vscode,这个编辑器没有atom那么花哨,但快太多了,安装插件的方式也相当友好.本文将介绍我是如何配置Vscode的.

我主要使用的是Python和golang,偶尔使用下js,scala,c,rust,因此除了同用的配置外还会介绍这两种语言的配置方式.

本文初稿在2018年2月发布,在2019年2月更新过一次,现在已经又过去将近一年,vscode已经从小众工具成了流行趋势.这一年中vscode又有了相当多的变化.
本文这次更新也是在这些变化的基础上进行的.

## 简单介绍

[vscode](https://github.com/microsoft/vscode)是由微软开发并开源的基于[electron](https://www.electronjs.org/)深度魔改的跨平台文本编辑器.

本质它上是一个nodejs程序,且大量使用了web技术,但由于魔改的好所以可以放心使用.

## 插件和安装方式

vscode支持插件,而且可以说如果不用插件,那vscode可以说毫无优势.vscode的插件是使用js开发的,并且有一套比较成熟的开发工具.后续我会写一个关于vscode插件开发的文章来介绍这方面的内容.vscode的插件策略是插件拥有单独进程,因此通常不会相互冲突,可以放心安装.

vscode拥有众多插件,而且有官方的[插件管理平台](https://marketplace.visualstudio.com/VSCode),我们可以自己写插件并提交插件到平台.
官方也在维护几个非常流行的插件;同时也有不少优质或沙雕的第三方插件相当流行.可以说vscode的生态是相当稳健而繁荣的.

vscode插件的安装有两种方式:

+ 图形化安装的,在左侧的插件按钮用于搜索和安装插件.

![vscode的插件管理][1]

+ 去插件管理平台中找到需要的插件,然后在其中点击`install`安装

插件多数是安装后只要在配置页面改改对应配置就可以使用的,甚至有不少默认的配置项足够开袋即食的.但依然会有一些插件需要有额外的控制操作.

通常与插件的交互模式有三种:

1. `ctrl+p`组合键呼出菜单,输入`>+对应的插件名+对应的操作`.这是最通用的一种,听起来很不好用,但其实一路有提示,可以选择提示中的操作执行,实际体验和图形化界面差距并不大.
2. 使用图形化的按钮控制,通常这类插件就属于完成度比较高的类型了,他们会改变vscode的交互界面,在顶栏,底栏,侧边栏或者编辑区的右侧增加一个按钮,这个按钮就可以让你和插件交互了.
3. 使用快捷键,这种方式有一定的和默认快捷键冲突的风险,但一般都会有提示.

## 设置vscode

vscode的设置位置根据平台不同会有一些区别,windows上在`文件->首选项->设置`,mac上在`CODE->首选项->设置`. 
vscode的设置使用json格式,不过有一个设置页面对这个json进行了渲染,同时有个搜索框可以搜索key所以相对的提高了一点交互上的便利性.
但总体上讲因为配置项太多太杂还是比较难以配置设置的.这也算功能强大的代价吧.

## 通用设置推荐

此处的设置针对各种任务都可以提高使用体验的设置.个人有如下建议

### 设置主题

vscode原始界面比较丑,可以通过安装主题插件改善,我比较喜欢的官方主题是`Solarzed-dark`和`Solarzed-light`.

选择主题的路径是`首选项->颜色主题`,在其中选择即可. 

第三方主题同样是插件,如果有看上的第三方主题可以直接安装插件安装,之后在`颜色主题`中选择

### 更改图标库

官方提供的图标库实在是不直观,可以替换为[vscode-icons](https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons).
该插件会为不同后缀的文件以及一些特定名字的文件夹更换其在左侧资源管理器中的图标,让其一眼就可以看出是什么文件.这个插件安装好后可以在`首选项->文件图标主题`中选择设置.

### 中文化

vscode的语言包一样是插件,我们可以在安装好vscode后通过安装插件[Chinese (Simplified) Language Pack for Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=MS-CEINTL.vscode-language-pack-zh-hans)

### 中文编码兼容性

windows默认的中文编码是GBK而不是UTF-8,这会导致一些文本在跨平台时出现乱码的情况.当然了我还是推荐统一使用utf-8编码.为了方便把GBK转为UTF-8,我们可以安装插件[GBKtoUTF8](https://marketplace.visualstudio.com/items?itemName=bukas.GBKtoUTF8)来实现.

### 嵌入命令行终端

vscode毕竟主要是用来编程的,如果在页面上有一个嵌入的命令行终端会很大程度上提高生产力.这可以通过安装插件[Terminal](https://marketplace.visualstudio.com/items?itemName=formulahendry.terminal)来实现.
安装好后会在右下角多出一个按钮来,点击它就弹出终端的界面.我们可以在弹出的终端界面右上角选择使用的是什么终端,比如在windows上就可以选择`cmd`,`powershell`,`wsl`或者`git bash`.

### 括弧高亮提示

多数编程语言都大量使用`()`,`[]`,`{}`.这种需要成对出现的括弧实际上是比较难以维护的.为了提高可维护性可以使用插件[Bracket Pair Colorizer](https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer)来对其做高亮处理.

### 代码书签

同样是为了提高可维护性,我们可以使用[Bookmarks](https://marketplace.visualstudio.com/items?itemName=alefragnani.Bookmarks)来为代码设置书签.

使用方法是选中一行后就可以右键选择`书签:开关`(`ctrl+alt+k`)来设置获取取消设置书签,要在书签间切换只要右键选择`书签:上一个`(`ctrl+alt+L`)或者`书签:下一个`(`ctrl+alt+J`)就可以执行书签间的跳转.

### 设置同步

vscode的同步依赖github(已经被微软收购)账号或者微软账号.这项功能在最新的版本(1.50.1)中还是一项实验性功能,但已经可以使用了.建议有多机需要同步vscode配置的都开启.

开启的方法是点击左下角账户按钮(图标是一个人半身像的抽象符号)中的设置同步登陆账号.登陆账号后如果云端没有数据则会进行一次同步,如果云端已经有数据则会下载数据并让你选择是与本地合并还是替换本地配置.

目前看到的设置同步有一个缺陷是不能区分os,我的mac也会同步windows中配出来的配置,因此会造成一些插件的一些设置执行文件路径的设置项混乱,不过即便如此这也已经相当好用了.



## 不同场景的插件推荐

有一些配置是无论使用什么语言都需要做的比如设置主题,设置合作编码工具,以及一些功能性的插件.


### 安装通用插件


+ Markdown Extension Pack

    一个markdown的扩展包,几乎包含了所有有用的markdown相关插件.注意要展示latex数学公式需要额外安装node包:
    + `markdown-it`
    + `katex`
    + `clipboardy`

+ Markdown Preview Github Styling

    github风格的markdown展示

+ Path Intellisense

    自动完成地址补完

+ Docker

    docker语法高亮和管理工具

## Python相关插件及其设置

python相关的插件需要安装一部分python工具作为依赖

+ `isor`用于重新排列import的依赖
+ `pylint`用于检测代码风格
+ `pep8`用于检测代码风格是否满足pep8风格
+ `autopep8`用于自动将代码转换成pep8风格
+ `ptvsd`用于远程调试远端服务器上的代码

### 安装插件

+ autoDocstring

    用于自动生成python的docstring

+ python

    官方的python插件,简单实用


<!-- + Visual Studio IntelliCode

    微软为python,js,java开发者设计的一个自动补全插件

+ Python Preview

    便于debug的可视化工具 -->

<!-- + Jupyter

    可以在vscode中使用jupyter notebook -->


+ Cython(Language-Cython)

    Cython语法高亮

+ Jinja(Better Jinja)

    jinja语法高亮

### 设置python的语法工具(update @2019-2-12)

```shell
"python.venvPath": "${workspaceRoot}/env",
"python.linting.mypyEnabled": false,
"python.linting.pylintEnabled": false,
"python.linting.pep8Enabled": true,
"python.linting.pep8Args": [
    "--max-line-length=140",
    "--ignore=E501"
],
"python.linting.pydocstyleEnabled": true,
"python.linting.pylintArgs": [
    "--include-naming-hint=n",
    "--max-line-length=140",
    "--disable=W0311",
    "--disable=C0103",
    "--disable=E1101",
    "--disable=C0111",
    "--disable=W0621",
    "--disable=wildcard-import",
    "--enable=W0614"
],
"python.formatting.autopep8Args": [
    "--max-line-length=140",
    "--indent-size=4",
    "--ignore=E501"
],
"python.sortImports.args": ["-rc", "--atomic"],
"python.unitTest.unittestEnabled": true,
"autoDocstring.docstringFormat": "google
```

## C语言相关插件及其设置

### 安装插件

+ C/C++

    官方语言插件,简单好用

+ cpplint

    c/c++的语法检查插件

+ Include Autocomplete

    C/C++ 头文件管理

+ Arduino

    vscode上的Arduino扩展

### 设置C/C++语法工具

```shell
"cpplint.cpplintPath": <path>,
"C_Cpp.clang_format_fallbackStyle": "Google",
"C_Cpp.clang_format_style": "{ BasedOnStyle: Google, IndentWidth: 4 }"
```

"cpplint.cpplintPath"用于指定`cpplint`的位置,cpplint是一个python工具,可以使用pip安装

## 前端相关插件及配置

### 安装插件

+ Auto Rename Tag

    自动为html中对应的关闭标签改名

+ Auto Close Tag

    为html格式自动添加对应封闭的插件

+ JavaScript (ES6) code snippets

    es6工具

+ ESLint

    jsde 语法检查工具

+ Vetur

    vue2的语法高亮


+ Beautify

    美化javascript, JSON, CSS, Sass, 和HTML的代码格式

+ jekyll syntax package

    jekyll语法高亮



## 远程项目

+ [Remote Workspace(new @2019-2-12)](https://marketplace.visualstudio.com/items?itemName=mkloubert.vscode-remote-workspace)

    用于直接编辑远程机器上的文件.支持多种协议.以sftp协议为例.
    使用方法:

    1. 在合适的位置新建一个`[name].code-workspace`文件,`name`部分随便取.其内容为:

        ```json
        {
            "folders": [{
                "uri": "sftp://my-user:my-password@example.com/home/pi/?debug=1",
                "name": "My SFTP folder"
            }]
        }
        ```
    2. 在`文件->打开工作区`中打开这个`.code-workspace`文件等一会儿就可以打开了.

[1]: {{site.url}}/img/in-post/vscode/vscode_ext.png
[2]: {{site.url}}/img/in-post/vscode/vscode_config.png