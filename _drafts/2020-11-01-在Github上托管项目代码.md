---
title: "在Github上托管项目代码"
date: 2020-11-01
author: "Hsz"
category: recommend
tags:
    - Github
header-img: "img/home-bg-o.jpg"
update: 2020-11-11
series:
    get_along_well_with_github:
        index: 4
---
# 在Github上托管项目代码

Github是一个相当成熟的代码托管平台,我们除了可以在上面找开源项目外,更重要的是可以借助它自己构建自己的开源项目.

不要认为只有大型开源项目才是开源项目.

开源项目本身并不一定是直接可用的软件,也可以是一个包,一个简单的命令行工具等;为开源项目贡献代码也不一定要真的参与编程,为它写文档,提工单也是在为开源项目做贡献.
这些都可以在Github上实现.

## 使用Github记录灵感

Github提供一个叫`gist`的服务可以用于记录文档和代码片段.这个服务需要翻墙才能使用有点遗憾,但如果可以使用还是很方便的.我们很多时候灵感都是只言片语和不成体系的代码.很多时候这些灵感稍纵即逝,我们也不知道它是否值得投入精力将它变成成体系的项目.这种时候最好的办法是记录下来,当然你随便找个word,甚至拿个纸笔记下来也可以,但往往灵感需要积累到一定数量才能出现真正有价值的,而随意记录很容易丢失不能形成规模.在[奔跑吧，程序员：从零开始打造产品、技术和团队](https://www.ituring.com.cn/book/1776)一书中有过相似的描述,记录灵感也是创业过程中需要关注的点.我想这也就是`Github gist`服务的初衷吧.

要使用`Github gist`可以点击个人头像左边的小加号,在弹框中选择`New gist`.

![进入 gist][1]

我们会进入创建页

![new gist][2]

在里面写上你的灵感保存就好了.要查看以前写gist的可以点击右上角`view your gist`

![gist list][3]

gist也可以评论也可以fork也可以收藏.和对代码仓库的关注方式基本一样.我们也可以在顶栏左上角的`All gists`中查看到其他人的gist.

## 题外话:Github中的代码仓库命名空间和特殊代码仓库名.

Github中代码仓库都是在命名空间下的,一个典型的代码仓库地址类似`https://github.com/<命名空间>/<代码仓库名>`.
命名空间隐式的包含了从属关系.Github中包含两种命名空间:

+ 账号命名空间

    当你注册了一个github账号,那么你的用户名就成了一个命名空间,你在自己账号下创建的所有代码仓库就都属于这个你账号为名字的命名空间了.
    这种命名空间下的代码仓库默认只有账号的所有人才可以做push操作.

+ 组织命名空间
  
    组织命名空间需要由登录账号创建.在人头像左边的小加号,在弹框中选择`New organization`就可以创建一个组织.

    ![新建组织][4]

    新建组织过程中会让你提交用途等信息.创建过程中会有个可选项是让你邀请成员组成`Team`.这是因为组织的设计目的接近开源群组的概念,本身是用于让一群人管理一组项目的.因此组织内有团队管理页面,有团队日志审计页面,同时也有成员的权限管理页面.

    个人使用的化更多的可以把组织命名空间用作代码仓库的归类工具方便自己管理.

命名空间中的项目管理都是一样的,每个命名空间都有一个特殊的仓库名`<命名空间>.github.io`用于借助`Github Pages`服务构造命名空间的描述文档.如何使用`Github Pages`我们会在后面介绍.

## 创建一个代码仓库

在右上角头像边的加号上可以创建账户命名空间下的代码仓库,而组织页面右上角的`New`按钮可以用于创建组织命名空间下的代码仓库.

![新建仓库][5]

我们可以选择公开或者私有自己的代码仓库,在以前github对私有代码仓库是收费的,现在页免费了.不过如果是开源项目建议公开.

Github给出了一些`.gitignore`的模板,不过老师说并不是很全面,一般都还是需要按自己的需求修改的.

创建好后就只需要clone到本地就可以开始你的开发了.

## 为你的代码仓库建立文档

无论是从便于维护的角度还是从便于分享的角度,你的项目都应该维护好自己的文档.

Github包括其他代码托管平台都会提供以下工具用于文档建筑.

+ 对根目录下`README.md`的渲染,有的也可以渲染`README.rst`比如Github
+ 项目wiki服务的支持(多数支持)
+ 项目静态页面支持(Github,Gitlab有支持)

通常他们是按必要性依次下降的.下面做详细介绍

### 利用`README`简单介绍代码仓库

一般来说`README`是每个项目必备的文件.它是对整个项目的快速入口,一些比较简单的项目可能文档就只要`README`就够了.

通常`README`需要描述如下几个方面

+ 项目元信息介绍
    + 版本
    + 状态
    + 作者
    + 作者email
+ 项目简介,介绍功能
+ 项目依赖
+ 项目关键字
+ 项目特性
+ 安装方式
+ 使用方式示例
+ 使用限制
+ 要做未做的特性

一般长期维护的项目还会有一个专门`CHANGELOG.md`用于描述版本变化.一个比较靠谱的模板如下:

```markdown
# v0.0.0

## Bugfixes(修正bug)

1. xxx
...

## Features(新特性)

1. xxx

## Deprecations and Removals(进入过时的特性和删除支持的特性)

1. xxx

## Performance Optimizing(性能优化)

1. xxx

## Improved Documentation(文档更新)

1. xxxx

## Dependencies(依赖变化)

1. xxx

# v1.0.0

...
```

版本变化一般不是给用户看的而是给开发者看的.

### 利用Wiki托管开发文档

![利用Wiki托管开发文档][6]

在Github代码仓库页的顶部可以进入wiki选项卡,在其中我们可以建立一个多页的文档,在比如Gitlab,gitea中都有类似功能.

由于wiki服务的位置比较不易到达,因此如果要用的话比较适合放置开发文档.

开发文档的主要作用是向开发者解惑项目.所以会和一般的用户使用文档不太一样.

内容通常包括

1. 项目结构
2. 开发规范
3. 测试方法
4. 常见问题

当然了并不是所有项目都有必要使用Wiki服务.通常符合如下特点的项目才应该使用:

+ 参与人员比较多
+ 项目历史比较长

### 构建项目主页

如果你的项目是一个面向一般用户的产品,那么一个好看规整的项目主页是一个很大的加分项.

但是通常来说构造项目主页意味着可能有一定成本,这个就需要取舍了.

项目主页一般来说是更加细致化的`README`,会详细介绍项目的使用方法和注意事项,同时往往也会提供接口文档方便查阅.

#### 利用Github Pages创建项目主页

Github提供了[Github Pages](https://pages.github.com/)这个静态网站托管服务,你可以免费的获取一个二级域名以及一个静态网站托管服务,还是很值的.
如果你觉得二级域名不行,它也支持配置你自己的域名,最多就是花个几十块买个域名就够了.

任何一个项目都可以使用Github Pages功能.在项目的`Setting`选项卡中你可以找到Github Pages的相关配置

![配置github pages][7]

我们可以指定一个位置(指定分支/指定文件夹)作为托管目录存放静态网页文件或者渲染工具的源文件.也可以在`Custom domain`上指定用户的域名.

项目如果没有指定域名,那么Github会自动分配给他一个域名.域名的分配规则是:

1. `Custom domain`上指定用户的域名则使用指定的域名
2. 如果项目为命名空间中的特殊仓库(`<命名空间>.github.io`),那么会得到一个默认二级域名`http://<命名空间>.github.io`,访问uri的第一级为`/`,也就是访问路径为`http://<命名空间>.github.io`
3. 如果项目不为命名空间中的特殊仓库(`<命名空间>.github.io`),且特殊仓库已经指定了域名,则使用特殊仓库指定的域名,但访问项目的uri第一级为项目名,即``http://<特殊仓库指定域名>/<项目名>`
4. 如果项目不为命名空间中的特殊仓库(`<命名空间>.github.io`),且特殊仓库没有指定了域名,那么会使用默认命名空间的二级域名,访问项目的uri第一级为项目名,即``http://<命名空间>.github.io/<项目名>`

> 配置自定义域名

要配置自定义域名首先你得先买个域名,哪里买都行.

然后就是配置了.配置的步骤如下:

1. 在`Setting`中`Github Pages`->`Custom domain`中填写你申请的域名,然后保存
2. 在托管目录的根目录中新建一个`CNAME`文件,其中填上你申请的域名
3. 到你买域名的供应商那边进行域名解析,有如下几种情况:

    + 二级域名,比如`blog.xxxx.xx`这种

        选CNAME作为解析方式,然后把自己的原始网址放上去就行了.

    + 一级域名和www域名
        除了要用CNAME外,还需要用A解析.只要在A解析中选好,没有二级域名就解析`@`,有www就额外加上`www`,ip地址填上
        1. `192.30.252.153`
        2. `192.30.252.154`

这样等到到域名解析生效你就可以用自己的域名访问部署的静态页面服务了.

Github Pages默认使用[Jekyll](http://jekyll.com.cn/)作为静态网站生成器,我们也可以在托管目录下创建空的`.nojekyll`文件来关闭Jekyll渲染从而使用其他前端技术.
下一篇文章开始的3篇文章将介绍Jekyll在内的常见好用的静态页面生成工具.

## 项目管理

目前市面上的Git服务都是使用`Issue`(工单系统)配合`Pull Request`进行项目管理的.前面一篇文章中介绍的`Github Workflow`便是基于这两样工具建立起来的.

在这两个之上,许多Git服务也会提供[里程碑计划](https://baike.baidu.com/item/%E9%87%8C%E7%A8%8B%E7%A2%91%E8%AE%A1%E5%88%92/4579657?fr=aladdin)支持用于聚合整理工单.
许多Git服务还会为工单提供标签系统用于归类整理工单便于管理.

Github作为这个领域的标杆当然这些功能都有.下面我们开始介绍如何利用这些工具做项目管理.

在Github下工单同样也和`Pull Request`的Merge操作以及Github提供的看板服务`Github Project`可以联动.这些后面也都会有介绍.

### 管理你的工单

### 使用标签归类你的工单

### 在`Pull Request`中关联你的工单

### 使用里程碑串联你的工单

### 使用Github Project构造看板

## 发布你的项目

[1]: {{site.url}}/img/in-post/githubcode/github-gist.PNG
[2]: {{site.url}}/img/in-post/githubcode/new-gist.PNG
[3]: {{site.url}}/img/in-post/githubcode/gist-list.PNG
[4]: {{site.url}}/img/in-post/githubcode/github-organization.PNG
[5]: {{site.url}}/img/in-post/githubcode/新建仓库.PNG
[6]: {{site.url}}/img/in-post/githubcode/编辑wiki.PNG
[7]: {{site.url}}/img/in-post/githubcode/githubpage.PNG

