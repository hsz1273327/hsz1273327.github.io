---
layout: post
title: "用deskmini和8700g组一台AIPC"
series:
    aipc_experiment:
        index: 2
date: 2024-11-27
author: "Hsz"
category: experiment
tags:
    - Linux
    - AIPC
    - Rocm
header-img: "img/home-bg-o.jpg"
update: 2024-11-27
---
# 用deskmini和8700g组一台AIPC

我在2024年8月就入手了[华擎的deskmini x600准系统](https://www.asrock.com/nettop/AMD/DeskMini%20X600%20Series/index.cn.asp).基于它配合[8700g](https://blog.hszofficial.site/experiment/2024/11/08/aipc%E6%8A%98%E8%85%BE%E8%AE%B0/#amd-ryzen-7-8700g)我会组一台APIC带到单位作为办公机使用替换我装了黑苹果的nuc8.

计划这个机器的生命周期为3年,在这三年中它会被用来:

+ 平时工作.主要是编程,写markdown,打docker镜像,浏览网页.基本不关机
+ 轻度娱乐.带回家可以打打游戏.
+ 学习研究,主要是研究rocm和npu在ai方面的使用情况.为后续家用服务aipc项目做技术储备,当然也会额外学些别的比如blender,godot什么的.

本文仅介绍这台机器的配置思路和基本环境搭建过程

## 准系统规格

它是deskmini x300准系统对应AM5接口CPU的升级款.

它可以分为4个部分:

+ 一个标准stx规格主板
+ 一个1.9L机箱
+ 一个120w的19v/2.5/5.0电源适配器
+ 一个标称解热65w铝制cpu散热器

当然了电源适配器和cpu散热器基本可以认为是添头,主要部分还是主板和机箱

### 主板规格

主板就很有特点,不常见的stx规格,和上一代x300的前后置io没有变化.使用19v的2.5/5电源适配器供电,内存规则则是ddr5的笔记本内存.总的来说规格如下:

+ 供电: 6+2相供电,一般认为最大可以带220W板载功率,我查了下市面上符合19v/2.5/5.0这一规格的电源适配器最高也就200w,所以说供电也算绰绰有余.
+ CPU: 一个AMD的AM5接口,支持最大tdp65W的zen4/zen5带核显的cpu,据说有人用7800x3d这类tdp超过65w的U好像也能正常运行.
+ 内存: 两个SO-DIMM DDR5插槽,支持最高6400+MHz,最大96GB容量的笔记本DDR5内存,支持xmp和expo
+ 存储:
    + 两个sata2.5寸硬盘接口,需要使用专用转接线引出标准sata口和对应供电
    + 一个pcie 5.0x4的m.2固态硬盘(正面),
    + 一个pcie 4.0x4的m.2固态硬盘(背面)
+ 网络: 
    + 后面板有一个RJ-45 LAN网口(2.5G)
    + 主板正面m2下方有一个M.2 Key-E无线网卡接口,我买的是带wifi配件的版本,给了一个wifi6网卡.
+ 视频输入输出:
    + 后io面板一个dp1.4接口(4K@120Hz)
    + 后io面板一个hdmi接口(4K@120Hz)
    + 后io面板一个D-Sub接口(1080p@60Hz)
+ 音频输入输出:
    + 前置IO一个3.5mm耳机孔
    + 前置IO一个3.5mm音频输入孔
+ USB:
    + 前置IO一个USB 3.2 Gen1的Type-A接口
    + 前置IO一个USB 3.2 Gen1的Type-C接口
    + 后置IO两个USB 3.2 Gen1的Type-A接口

+ 板上额外接口
    + 正面右上角1个USB 2.0的9pin接针
    + 正面右上角USB 2.0的9pin接针边1个2pin的清cmos接针
    + 正面底部左下角两个4pin的pwm风扇接针
    + 正面右下角一个开机的9pin接针
    + 正面右下角开机9pin边一个4pin的音源接针
    + 背面底部两个特制sata中间一个4pin(ph2.0 4P)的内置音响接口

### 机箱规格

deskmini配置的是一个1.9L机箱,真就是巴掌大,使用抽拉式结构,拧开后面4颗螺丝后直接拉主板支架就出来了,还是相当方便的.主板支架也是使用4颗螺丝固定,不过主板的io面板不是一体式的,看起来是真的很丐.

首先是主板支架,主板支架部分包括了机箱背面面板和主板支撑板,背面面板上提供了3个8mm天线孔和一个db9孔位,默认是由铁皮盖着的,可以拿螺丝刀敲掉.支撑板正面是四个螺柱用于支撑主板,背面则是一个2.5寸硬盘支架,支持放最多两块2.5寸硬盘.同时支撑板是有镂空的,我们可以比较轻松的穿线.

然后是外壳,外壳由一个滑槽将机箱内部分成了两个部分,小的那个部分(右侧)是sata硬盘的空间,如果不装那就是空着的.右侧面板提供了安装7.5x7.5标准VESA支架的接口;大的是主板的空间(左侧),主板空间支持小于等于47mm的下压式散热器,左侧面板提供了两个usb type-A孔位,可以掰掉挡板使用. 整个外壳部分只有顶部和左侧面板有镂空可以作为进出风口.

### 特点总结

这个准系统最大的卖点就是小.可以换am5接口桌面端CPU的准系统似乎目前只有它,而且它只有1.9L放哪里都不占地方.

这个机箱的最大缺陷其实就是散热,作为一个小机箱它肯定不存在风道,但由于没有提供风扇安装位,整个机箱的散热相当于只能靠CPU下压散热器吹进来那点风,而热风无法被快速排出必然容易造成箱内积热,更加严重的问题是内存条所在的位置几乎是完全封闭的,因此整个机器在重负载下最热的部分是内存.

这一代的deskmini确实属于没有用心设计,在不改变机箱主板尺寸的条件下可以做的改进有如下几点:

+ 前置type-c口如果可以改为usb4或者类似[技嘉B650E-AORUS-ELITE-X-AX-ICE](https://www.gigabyte.com/Motherboard/B650E-AORUS-ELITE-X-AX-ICE/sp#sp)这样直连cpu,这样不同的CPU可以有不同的速率.
+ 可以考虑

## 额外改造



## 最终搭配配置

我为这套除了配置了8700g外,还配置了

+ 英睿达48gx2 标称xmp5600MHZ的的笔记本内存
+ 闪迪至尊高速PCIE 3.0x4的2t固态硬盘,放在背面
+ 官方的Intel® Wi-Fi Kit,提供蓝牙和wifi6的支持

我为这套系统额外配置了如下设备

+ 利民apx90 x45纯铜版散热器用于替代原装散热器
+ 一对铝制内存散热装甲
+ 一条利民的2.5mm厚的散热硅胶垫用于背面ssd散热
+ 猫头鹰9214黑款风扇用于替换上面散热器的风扇
+ 第三方的DeskMini USB 2.0 排线,用于充分利用板载USB 2.0 接针以额外提供2个usb2.0接口
+ 自制clear cmos按钮(ds-402无锁自复位小微型按钮+母对母杜邦线,拆开一段后套入按钮针脚,按实并焊接加固,最后用热缩管保护加固)
+ 一个12cm的防尘网放在进风口
+ 官方提供的7.5x7.5标准VESA支架
+ 一块带7.5VESA接口的1080p@120hz的便携屏幕随时备用
+ 氮化镓200w 19v 2.5/5.0接口适配器替代原装电源适配器


## BIOS设置和超频调优

主板BIOS目前(截止到2024年11月30日)更新到4.03版本,支持了AMD AGESA 1.2.0.0.


## 系统及环境安装


## 后续